---
import H2 from "@/components/elements/headers/H2.astro";
import { type CollectionEntry, getCollection } from "astro:content";
import PlaceCardWide from "../placeCards/PlaceCardWide.vue";
import Button from "../elements/Button.vue";
import { getPlaceCardsFromArticles } from "@scripts/placeCard/handler";
import Section from "@/components/elements/Section.astro";
import UnorderedList from "../elements/lists/UnorderedList.vue";

const news = await getCollection("articles");

const promotionItems = await getPlaceCardsFromArticles(news.slice(0, 4));
---

<Section floatIn={true}>
    <section class="grid gap-8 md:grid-cols-[300px_1fr] md:gap-12">
        <div class="flex flex-col items-center gap-3 md:items-start">
            <H2 position="start" color="coral"
                >The latest news <wbr /> & updates</H2
            >
            <Button href="/articles">See all posts</Button>
        </div>
        <UnorderedList gap={3} id="news-items">
            {
                promotionItems.map((item) => (
                    <li>
                        <PlaceCardWide {...item} />
                    </li>
                ))
            }
        </UnorderedList>
    </section>
</Section>

<style>
    #news-items {
        container-name: search-results;
        container-type: inline-size;
    }
</style>
